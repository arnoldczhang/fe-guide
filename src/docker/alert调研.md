# 调研

## 告警类型
| 类型 | 说明 | 计算方式 | 
| -------- | -----: | -----: |
| js异常数 | 视业务方具体情况而定 | 基于上报数 |
| js异常率 | 20%?? | 指定时间内发生 JS 错误的 PV / 总 PV |
| 白屏率 | ?? | 基于上报数 |
| 用户截屏数 | 视业务方具体情况而定 | 基于上报数 |
| 内存不足数 | 视业务方具体情况而定 | 基于上报数 |
| 内存不足率 | ?? | 指定时间内发生内存不足的 PV / 总 PV |
| 定位失败数 | 视业务方具体情况而定 | 基于上报数 |
| 定位成功率 | 95%?? | 1 - 定位失败数 / 定位次数 |

---

## 告警分类
- 持续告警: 不紧急，不重要
- 波动告警: 业务重要性决定该告警重要性
- 关联告警: 有因果，要即时处理

---

## 阈值规则

| 分类 | 优点 | 缺点 | 计算方式 |
| -------- | -----: | -----: | -----: |
| 静态阈值 | 计算简单 | 通常是经验值 | - |
| 动态阈值 | 出了告警一定是大问题 | 1. 依赖历史数据，新埋点无法使用<br> 2. 小波动不敏感 | min(14 days history) * 0.6 |
| **周期性阈值** | 1. 比绝对值要敏感 <br> 2. 规避了业务自身的陡增陡降 | 1. 按百分比计算容易在低峰时期误警 <br> 2. 节假日、活动场景导致环比异常 | x(t) - x(t-1) |

### 周期性阈值

**按百分比计算容易在低峰时期误警？**

> 加入绝对振幅的下限，这样即使百分比高，实际影响面不大，也无需关注

**节假日、活动场景导致环比异常？**

> 如果是临时活动或非固定节假日，建议人工介入，或暂时静默处理
> 如果是固定节假日场景，建议采用同比策略（去年同期）
