# 深拷贝

[终极手段](https: //juejin.im/post/5d6aa4f96fb9a06b112ad5b1?utm_source=gold_browser_extension#heading-3)

## 思考点

### 循环引用
 - 创建存储空间（ 比如new WeakMap）
 - 每次创建新对象，也在存储空间放一份（map.set(target, cloneTarget)）
 - 下次创建新对象前，检索存储空间，有则直接返回
 - 建议用WeakMap，保证key的弱应用

### 循环效率
>
> for/forEach 转 while
>

```js
function forEach(arr, iteratee) {
  let index = -1;
  const { length } = arr;
  while (++index < length) {
    iteratee(arr[index]);
  }
};
```

### 其他数据类型

#### 特殊类型
- null
- function

#### 可遍历类型
- Map
- WeakMap
- Set
- WeakSet
- Object
- Array

**初始化方法**

```js
function init(obj) {
  const Ctor = obj.constructor;
  return new Ctor;
};
```

#### 不可遍历类型

