# 性能优化

## 参考
- ![性能优化](性能优化.jpeg)
- https://juejin.im/post/5b0b7d74518825158e173a0c
- https://csstriggers.com/
- [web性能优化](https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650587679&idx=1&sn=9698007b09525696896d4cbf135d1ede&scene=21#wechat_redirect)
- [2018性能优化](https://mp.weixin.qq.com/s/Ngj1bVkXRsXx0Ke6EdWkCg)
- [代码体积优化](https://mp.weixin.qq.com/s/1UowJDccbK8FI-VH8S90_Q)
- [2019性能优化](https://github.com/xitu/gold-miner/blob/master/TODO1/front-end-performance-checklist-2019-pdf-pages-1.md)

## 职能
- 布局分层 =》cpu
- 绘制渲染层 =》gpu

## 思路
- 提取需要大量重绘、重排的元素，单独分层

## 硬件加速
- Video元素、WebGL、Canvas、CSS3 3D、CSS滤镜、z-index

## 优化策略
- css读写分离：js不直接操作样式 =》toggleclass或style.cssText
- dom离线更新：display：none或visibility:hidden
- offsetTop =》style.top
- 图片指定宽高

### 资源加载
- 配置超长时间的本地缓存(cach-control/expires) - 节省带宽，提高性能
- 采用内容摘要（文件内容）作为缓存更新依据  - 精确的缓存控制
- 静态资源CDN部署 - 优化网络请求
- 资源发布路径实现非覆盖式发布(aa.ad90j2b.js，aa.bdieojad.js资源多个版本共存) - 平滑升级
- 与首屏无关的样式可设成非阻塞性css
```html
<!-- 设置media="print" -->
<!-- 这样资源的优先级就会变成lowest -->
<link href="xxxx.css" rel="stylesheet" media="print">
```

## chrome performance
- Rendering（重排）
- Painting（重绘）

## 其他
- resize 和 scroll 事件也是至少 16ms 才会触发一次，并且自带节流功能

