# 前端代码质量

## 参考
- [构建质量可信系统的 10 要素
](https://zhuanlan.zhihu.com/p/86097675)

## 目录
<details>
<summary>展开更多</summary>

* [`架构`](#架构)
* [`工作流`](#工作流)
* [`组件封装`](#组件封装)

</details>

## 架构

### 设计原则
- 不多不少
- 演进（迭代）式
- 持续性

### 层次

**4c**

- 上下文（Context）
- 容器（Container）
- 组件或模块（Component）
- 代码（Code）

---

## 工作流

### 自动化
比如新人接受项目、团队，通过跑几个脚本就能实现：

- 开发系统初始化
- 开发环境搭建
- 线下/线上环境部署

### 可视化
如果做不到自动化，可以降级到可视化

### 规范
- commit hook
- commit message
- lint
- 命名规范等

---

## 组件封装
> 状态组件无模板，模板组件无状态

**状态组件**: 模板尽量简单，由子组件和少量标签组成，侧重于给子组件传状态

**模板组件**: 侧重可扩展性和包容性，状态纯依赖外部

### 关键点
- 可扩展性和包容性
- 文档说明
- 区域性

### 可扩展性和包容性
如果是一个泛用性很广的组件（比如各种胶水组件，像erchart封装、高德地图封装等）

**可变性**很多的字段，应该由外部控制（比如 x，y 轴信息，饼图、柱状图、折线图等特殊字段），这样随着数据变更，可做无修改兼容，这是包容性；

对于那些变化有限的字段，做配置项传入，这是可扩展性

### 文档说明
**一般来讲，组件应该包含下面文件:**

- interface.ts: 对入参、出参、接口返回值等数据，可做说明，即使代码不用 ts 写
- README.md: 主要介绍下组件用法、注意事项、demo
- mock.ts: 各种 mock 数据
- enum.ts: 这个看情况，有就加
- Smart-组件.ts: 给组件用的辅助方法，业务方不应该调用
- helpers.ts: 数据格式化方法，格式化之后的数据应该能直接提供给组件使用

### 区域性
- 样式（scoped、全局）
- 组件实例化唯一标识
