# ab实验

[TOC]



## 1. 概念

- 业务组（一个业务组包含多个世界）
- 世界（uid用户id、did设备id、session_id自定义id）
- 实验（基于世界建立，一个包含多个分组，对照组、实验组1~n）
- 分组（一个分组含有多个参数）
- 参数（通过配置中心，统一推送到客户端，客户端依据不同参数值做差异化显示）
- 指标（观察实验组统计的指标，挑选效果好的分组推全）

### 正交

> 即数学中的相互垂直，意味相互不影响。
>
> 世界里的各分桶（即流量），在其他各分层世界中会被打散均匀分配到不同分桶。

### 指标模板

> 对一系列指标做了权限收口，方便管理和指标批量订阅

### holdout/combo实验

> 当同时进行多个实验时，实验收益无法通过直接累加来衡量，所以需要hold一部分纯净流量，在实验结束后，对比实验流量和这部分纯净流量的指标差异，即可算出累计收益。

### 指标

- 大盘指标（ab平台定义的核心指标）
- 业务指标（业务侧自行创建的指标）

## 2. 流程简介

将实验人群分流到不同实验分组，观察各实验组的指标，挑选出实验效果好的分组进行全量推全生效。

## 3. 核心模块

### 3.1 实验模块

实验创建、实验详情、参数管理

### 3.2 指标模块

**数据源**

其他业务提供，不同存储方式（hive、druid、mysql等）

**生产**

~20，单指标生产，生产效率低，指标复用率极低，各种指标泛滥

20~21，配置式（批量指标生产）

21~22，配置式无法满足复杂sql场景，新增纯sql式（批量指标生产）

22~，标准明细表方式，配置式的指标结果表太过定制化&复用率低，所以抽象可复用的指标在标准明细表，在原生产页面再定制化，功能前置

**加工**

- 指标模板（对指标的批量权限管理、订阅）

- 指标体系（基于客户体系的、平台认可的指标的批量权限管理、订阅）

**消费**

- 指标分析（基于多种维度分类，比如性别、年龄等，观察实验指标在各实验分组的表现）

## 4. 影响面&收益

- 日均pv3w+，uv2k+，5k+在线exp
- 公司级B端应用，涵盖各业务方向（主站、商业化、海外等）
- 指标模块主要是数据组用，1800+生产任务，180+标准明细表

