# 前端自动化测试

[TOC]

## 背景
需求迭代频繁，测试资源紧张，如何有效提升上线质量和保障线上稳定性成了一个亟需解决的问题，在测试人力有限和交付周期紧张的前提下，开始探索前端自动化测试的可行性

## 方案对比
1. 项目 + 某测试框架 + 长期维护
2. 本地测试sdk + 持续集成
3. 云端测试平台
4. 【最优】云端测试平台 + 录制工具 + 本地测试sdk + 调度端

## 测试范围

1. 核心流程
2. 稳定的非核心流程

## 用户群体

QA、前端、产品

## 测试框架关注点

1. 是否支持录屏
2. 浏览器支持度
3. 社区活跃度

## 测试流程标准化

1. 创建资源
2. 运行测试
3. 上传产物
4. 清理资源
5. 消息推送

## 稳定性保障

1. 全流程埋点，traceId
2. 监控告警
3. 异常冷却
4. 重试机制
5. 服务自动重启
6. 人工干预

## 成本&收益

**成本高**

1. 学习
2. 维护
3. 开发
4. 运行

**收益不明确**

1. 测试数据（原始数据）
2. 中间产物（视频、日志）
3. 结果消费（周报、消息推送）

## 难点
1. DSL设计
2. 录制工具优化
3. 稳定性保障

## 前端测试方法
静态测试 --> 单元测试 --> 集成测试 --> e2e测试 --> 性能测试

### 静态测试
> 编辑器插件
eslint、typescript

### 单元测试
> 工具方法、纯计算逻辑

jest、vitest、mocha

### 集成测试
> 多个组件、模块协同工作

vitest + @vue/test-utils

### e2e测试
> 黑盒可视化，模拟操作行为

puppteer、playwright、cypress

### 性能测试
lighthouse