# 设计文档

## 参考

- [谷歌工程师如何写设计文档的](https://mp.weixin.qq.com/s/7IRAFZPJB5vxle8UuEusKA)
- [设计-二次确认功能](https://mp.weixin.qq.com/s/CPqSjGoPJ8_lPnOBPClr6A)
- [设计-一个普通button](https://juejin.cn/post/6990511054224621598)

## 目录
<details>
<summary>展开更多</summary>

* [`文档结构`](#文档结构)
* [`其他关注点`](#其他关注点)
* [`什么时候需要设计文档`](#什么时候需要设计文档)
* [`生命周期`](生命周期)

</details>

---

## 文档结构

### 背景

- 粗略、简洁地介绍客观背景事实



### 目标

- 目标
- non-goals（本能合理的成为目标，但是最终明确选择不做为目标的东西）



### 设计

> **这块应该是文档的重点部分！！！**
>
> 概述 -> 详情

- 重点介绍基于背景&目标的所做的**权衡**
- 记录多个建议方案，以及能达成目标的特定方案



#### 系统语境（架构）图

> 最精简的整体架构图

#### APIS

> 如果涉及到，可以展示api的精简信息，而不是关于它的所有细节

#### 数据存储

> 同上APIS的处理方式

#### 代码（伪代码）

> 应尽可能少的贴代码，除非是闻所未闻的处理，当然，代码太多贴个链接也行

#### 约束度

> 受限于各种条件，可能有很多方案，但没有一个最佳方案，所以需要权衡，组合出次优方案



## 其他关注点

### 交叉问题

> - 安全性
> - 隐私性
> - 可观测性
> - 等等...

### 文档长度

- 大项目：10-20页
- 小项目：1-3页



## 什么时候需要设计文档

- 是否有不确定的软件设计，前期需要花时间来增加确定性
- 是否需要高级工程师参与帮助设计
- 设计结果是否会有争议
- 设计中是否需要考虑隐私性、安全性、日志记录或其它交叉问题
- 是否需要设计文档对遗留系统做高层次的抽象

**满足3点即需要**



## 生命周期

### 创建&快速迭代

- 涉及与他人合作编写
- 可能涉及版本控制



### 审核

- 主要由其他不相关的人员，或级别高的工程师评审（流程慢）
- 私下直接寻求反馈（流程快）
- 主要为了在开发阶段早期发现问题



### 实现&迭代

- 文档无重大改动时，即可开始实现
- 实现过程有变数时（比如实现不了的需求），应尽快更新原文档，而非另建一份修正文档



### 维护&学习

- 过一段时间后重读设计文档，反问自己做对&做错了什么，这样能提高设计能力